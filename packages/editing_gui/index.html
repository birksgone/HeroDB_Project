<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HeroDB Curation Tool</title>
    <link rel="stylesheet" href="style.css">
    <!-- Alpine.jsを、魔法の杖として、読み込む -->
    <script src="//unpkg.com/alpinejs" defer></script>
    <!-- 私たちの、魔法の呪文集を、読み込む -->
    <script src="app.js"></script>
</head>

<body x-data="curationTool()">

    <!-- ========== HEADER: Global Controls ========== -->
    <header>
        <h1>HeroDB Curation Tool</h1>
        <div class="controls">
            <!-- API Target Switcher -->
            <fieldset>
                <legend>API Target</legend>
                <label><input type="radio" x-model="apiTarget" value="local"> Local</label>
                <label><input type="radio" x-model="apiTarget" value="render"> Render</label>
            </fieldset>
            <!-- Authentication -->
            <fieldset>
                <legend>Credentials</legend>
                <input type="text" x-model="username" placeholder="API Username">
                <input type="password" x-model="password" placeholder="API Password">
            </fieldset>
        </div>
    </header>

    <!-- ========== MAIN CONTENT ========== -->
    <main>
        <!-- Tool 1: Hero Block Search -->
        <section class="tool">
            <h2>Search Hero Blocks (like extract_learning_data.py)</h2>
            <div class="form">
                <input type="text" x-model="heroSearch.key" placeholder="JSON Key (e.g., propertyType)">
                <input type="text" x-model="heroSearch.keyword" placeholder="Keyword (e.g., ChainStrike)">
                <button @click="performHeroSearch()">Search Blocks</button>
            </div>
        </section>

        <!-- Tool 2: Language DB SuperSearch -->
        <section class="tool">
            <h2>SuperSearch Language DB</h2>
            <div class="form">
                <input type="text" x-model="langSearch.id_contains" placeholder="ID contains (comma-separated)...">
                <input type="text" x-model="langSearch.en_contains" placeholder="EN text contains (comma-separated)...">
                <input type="text" x-model="langSearch.ja_contains" placeholder="JA text contains (comma-separated)...">
                <button @click="performLangSearch()">Search Lang DB</button>
            </div>
        </section>

        <!-- Results Area -->
        <section class="results">
            <hr>
            <h2>Results</h2>
            <div x-show="loading" class="status">Loading...</div>
            <div x-show="error" class="status error" x-text="error"></div>

            <div x-show="results.count > 0">
                <p><strong x-text="results.count"></strong> items found.</p>
                <!-- View Mode Tabs -->
                <div class="tabs">
                    <button :class="{ 'active': viewMode === 'table' }" @click="viewMode = 'table'">Table View</button>
                    <button :class="{ 'active': viewMode === 'json' }" @click="viewMode = 'json'">Raw JSON</button>
                </div>

                <!-- Table View -->
                <div x-show="viewMode === 'table'">
                    <table>
                        <thead>
                            <!-- Table headers will be generated dynamically -->
                        </thead>
                        <tbody>
                            <!-- Table rows will be generated by Alpine.js -->
                        </tbody>
                    </table>
                </div>

                <!-- Raw JSON View -->
                <div x-show="viewMode === 'json'">
                    <textarea readonly x-text="JSON.stringify(results, null, 2)"></textarea>
                </div>
            </div>
        </section>
    </main>

</body>

</html>